## Основные моменты: Amazon EKS (Elastic Kubernetes Service)

EKS — это Managed (управляемый) сервис Kubernetes от AWS. Это значит, что AWS берет на себя самую сложную часть работы — управление «мозгами» кластера.

  * **Managed Control Plane:** AWS полностью управляет Control Plane (API Server, etcd, Scheduler). Они следят за его доступностью, делают бэкапы и патчи безопасности. Вы этого даже не видите, вы просто получаете Endpoint для подключения.
  * **Разделение ответственности:**
      * **AWS отвечает за:** Master Nodes (Control Plane).
      * **Вы отвечаете за:** Worker Nodes (рабочие узлы, где живут ваши поды). Хотя с помощью *Fargate* можно отдать AWS управление и рабочими узлами тоже.
  * **Интеграция:** EKS не висит в вакууме, он глубоко интегрирован в экосистему AWS (сеть, безопасность, диски).
  * **VPC CNI:** В EKS поды получают реальные IP-адреса из вашей сети AWS VPC. Это упрощает маршрутизацию.

-----

## Вопрос — Ответ

### 1\. Сервисы AWS, связанные с Kubernetes

Kubernetes в AWS не работает в одиночку. Он использует «кирпичики» облака для реализации своих функций. Вот главные связи:

| Функция K8s | Сервис AWS | Описание |
| :--- | :--- | :--- |
| **Хранение образов** | **ECR** (Elastic Container Registry) | Аналог Docker Hub, но приватный внутри AWS. EKS качает Docker-образы отсюда. |
| **Балансировка (Ingress/Service)** | **ELB** (ALB / NLB) | Когда вы создаете Service типа `LoadBalancer`, EKS автоматически создает AWS Load Balancer (Classic или Network). Для Ingress используется Application Load Balancer (ALB). |
| **Хранилище (PVC)** | **EBS** / **EFS** | Когда поду нужен диск (Persistent Volume), EKS через драйвер (CSI) создает реальный диск Amazon EBS и монтирует его к узлу. |
| **Вычислительные ресурсы** | **EC2** / **Fargate** | Это ваши Worker Nodes. Обычные виртуальные машины (EC2) или бессерверные контейнеры (Fargate). |
| **Права доступа** | **IAM** | Управление правами. Вы можете связать IAM Roles с Service Accounts в K8s, чтобы под имел права, например, писать в S3 бакет. |

### 2\. Демонстрация работы (Алгоритм)

Поскольку я текстовый AI, я не могу открыть консоль, но я опишу **Workflow** — как выглядит типичный процесс работы инженера с EKS от начала до конца.

**Шаг 1: Создание кластера (Infrastructure as Code)**
Инженер не кликает в консоли. Обычно используется утилита `eksctl` или Terraform.

  * *Команда:* `eksctl create cluster --name my-cluster --nodes 3`
  * *Что происходит:* AWS разворачивает Control Plane, создает сеть VPC, запускает 3 виртуальные машины EC2 и регистрирует их как ноды в кластере.

**Шаг 2: Настройка доступа (`kubectl`)**
Чтобы управлять кластером с ноутбука, нужно обновить конфиг.

  * *Команда:* `aws eks update-kubeconfig --name my-cluster`
  * Теперь ваш локальный `kubectl` знает, как стучаться в облачный кластер.

**Шаг 3: Деплой приложения**
Вы берете обычные манифесты (Deployment, Service), которые мы разбирали раньше.

  * *Команда:* `kubectl apply -f deployment.yaml`
  * *Что происходит:* EKS дает команду рабочим нодам (EC2) скачать образ из ECR и запустить поды.

**Шаг 4: Вывод наружу**
Вы создаете манифест Сервиса.

```yaml
apiVersion: v1
kind: Service
metadata:
  name: my-service
spec:
  type: LoadBalancer # Магия AWS происходит здесь
  ...
```

  * *Что происходит:* EKS видит `type: LoadBalancer` и посылает API-запрос в AWS: «Создай мне настоящий Load Balancer и перенаправь трафик на эти ноды». Через пару минут вы получаете публичный DNS-адрес для входа на сайт.

-----

### Следующий шаг

